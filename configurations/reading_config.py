import configparser
import os
from pathlib import Path


def get_config(configfile: str):
    base_dir = Path(__file__).resolve().parent.parent
    path_to_config = os.path.join(base_dir, configfile)

    config = configparser.ConfigParser()
    config.read(path_to_config)
    return config, base_dir


def get_config_settings(config, base_dir):
    """Read in `DEFAULTS.cfg` to obtain default configuration values."""
    directory_int = config["SETTINGS"]["INPUT_DIRECTORY"]
    directory_out = config["SETTINGS"]["OUTPUT_DIRECTORY"]

    input_directory = os.path.join(base_dir, directory_int)
    output_directory = os.path.join(base_dir, directory_out)

    return input_directory, output_directory


def get_config_parameters(config):
    """Read in `DEFAULTS.cfg` to obtain default configuration values."""
    target_url = config["PARAMETERS"]["TARGET_URL"]
    login_url = config["PARAMETERS"]["LOGIN_URL"]

    path_to_links_to_ignore = config["PARAMETERS"]["PATH_TO_LINKS_TO_IGNORE"]
    path_to_authorization_in_login_form = config["PARAMETERS"]["PATH_TO_AUTHORIZATION_IN_LOGIN_FORM"]
    path_to_links_to_crawler = config["PARAMETERS"]["PATH_TO_LINKS_TO_CRAWLER"]

    requests_per_minute = config["PARAMETERS"]["REQUESTS_PER_MINUTE"]
    collection_media_links = config["PARAMETERS"]["COLLECTION_MEDIA_LINKS"]
    submit_form_post = config["PARAMETERS"]["SUBMIT_FORM_POST"]
    crawler = config["PARAMETERS"]["CRAWLER"]

    return (target_url, login_url,
            path_to_links_to_ignore, path_to_authorization_in_login_form, path_to_links_to_crawler,
            requests_per_minute, collection_media_links, submit_form_post, crawler)
